{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Table = require(\"./Table\");\n\nvar _Table2 = _interopRequireDefault(_Table);\n\nvar _lodash = require(\"lodash\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _Pagination = require(\"./Pagination/Pagination\");\n\nvar _Pagination2 = _interopRequireDefault(_Pagination);\n\nvar _reactSelect = require(\"react-select\");\n\nvar _reactSelect2 = _interopRequireDefault(_reactSelect);\n\nrequire(\"react-select/dist/react-select.css\");\n\nrequire(\"./TableContainer.css\");\n\nrequire(\"bootstrap/dist/css/bootstrap.css\");\n\nrequire(\"../styles/global-styles.css\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar TableContainer = function (_Component) {\n  _inherits(TableContainer, _Component);\n\n  function TableContainer(props) {\n    _classCallCheck(this, TableContainer);\n\n    var _this = _possibleConstructorReturn(this, (TableContainer.__proto__ || Object.getPrototypeOf(TableContainer)).call(this, props));\n\n    _this.state = {\n      data: _this.props.data.data,\n      data1: _this.props.data.data,\n      head: _this.props.data.head,\n      currentPage: 1,\n      itemsPerPage: _this.props.size,\n      totalPages: 0,\n      numberofPages: 0,\n      value: \"\",\n      pagedata: _lodash2.default.chunk(_this.props.data.data, _this.props.size)\n    };\n    return _this;\n  }\n\n  _createClass(TableContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        totalPages: Math.ceil(this.state.data.length / this.state.itemsPerPage),\n        data: this.state.pagedata[this.state.currentPage - 1]\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        value: event.value\n      });\n    }\n  }, {\n    key: \"handlePage\",\n    value: function handlePage(e) {\n      this.state.totalPages <= Math.ceil(this.state.data1.length / e.value) ? this.setState({\n        itemsPerPage: e.value,\n        totalPages: Math.ceil(this.state.data1.length / e.value)\n      }) : this.setState({\n        currentPage: 1,\n        itemsPerPage: e.value,\n        totalPages: Math.ceil(this.state.data1.length / e.value)\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(nextProps, nextState) {\n      if (this.state.data !== nextState.data) {\n        this.setState({\n          data: nextState.pagedata[nextState.currentPage - 1]\n        });\n      }\n    } //for filter data\n\n  }, {\n    key: \"filter\",\n    value: function filter(e) {\n      this.setState({\n        filter: e.target.value\n      });\n    } //iso 8601 to date object\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var tbData = this.state.data1;\n      tbData = tbData.map(function (data) {\n        var time = void 0;\n        data.created_at ? time = data.created_at : time = \"\";\n        var date = new Date(time);\n        var dt = date.getDate();\n        var month = date.getMonth() + 1;\n\n        if (dt < 10) {\n          dt = \"0\" + dt;\n        }\n\n        if (month < 10) {\n          month = \"0\" + month;\n        }\n\n        var date_Data = date.getFullYear() + \"-\" + month + \"-\" + dt;\n        data.created_at ? data.created_at = date_Data : null;\n        return Object.values(data);\n      });\n\n      var tbdata2 = _lodash2.default.chunk(tbData, this.state.itemsPerPage);\n\n      var items = tbdata2[this.state.currentPage - 1];\n      var keys = this.state.value; //filter items\n\n      if (this.state.filter) {\n        var data = tbData.filter(function (item) {\n          var searchTerms = keys === \"\" ? item : item[keys];\n          return searchTerms.toString().toLowerCase().includes(_this2.state.filter.toLowerCase());\n        });\n        tbdata2 = _lodash2.default.chunk(data, this.state.itemsPerPage);\n        items = tbdata2[this.state.currentPage - 1];\n      }\n\n      return _react2.default.createElement(\"div\", {\n        className: \"container\"\n      }, _react2.default.createElement(\"div\", {\n        className: \"card\",\n        style: {\n          marginBottom: 15,\n          marginTop: 20,\n          padding: 10,\n          minWidth: 600\n        }\n      }, _react2.default.createElement(\"div\", {\n        className: \"card-header\",\n        style: this.props.style ? this.props.style : {\n          opacity: 0.8,\n          backgroundColor: \"blue\",\n          color: \"#ffffff\",\n          textAlign: \"center\"\n        }\n      }, this.props.title), _react2.default.createElement(\"div\", {\n        className: \"card-body\"\n      }, _react2.default.createElement(\"div\", {\n        className: \"react-bs-table-container\"\n      }, _react2.default.createElement(_react2.default.Fragment, null, _react2.default.createElement(\"div\", {\n        className: \"react-bs-table-tool-bar\"\n      }, this.props.search === true ? _react2.default.createElement(\"div\", {\n        className: \"row\"\n      }, _react2.default.createElement(\"div\", {\n        className: \"col-4\",\n        style: {\n          paddingRight: 0,\n          zIndex: 1\n        }\n      }, _react2.default.createElement(_reactSelect2.default, {\n        style: {\n          paddingBottom: 6,\n          borderBottomLeftRadius: 4,\n          borderBottomRightRadius: 0,\n          borderTopLeftRadius: 4,\n          borderTopRightRadius: 0\n        },\n        name: \"Filter By\",\n        placeholder: \"Filter By\",\n        value: this.state.value,\n        onChange: this.handleChange.bind(this),\n        clearable: false,\n        options: [{\n          value: \"\",\n          label: \"All\"\n        }].concat(_toConsumableArray(Object.values(this.state.head).map(function (data, index) {\n          return {\n            value: index,\n            label: data\n          };\n        })))\n      })), _react2.default.createElement(\"div\", {\n        className: \"col-8\",\n        style: {\n          paddingLeft: 0\n        }\n      }, _react2.default.createElement(\"input\", {\n        className: \"form-control my-0 grey-border\",\n        style: {\n          paddingBottom: 4,\n          borderBottomLeftRadius: 0,\n          borderBottomRightRadius: 4,\n          borderTopLeftRadius: 0,\n          borderTopRightRadius: 4\n        },\n        type: \"text\",\n        placeholder: \"Search\",\n        \"aria-label\": \"Search\",\n        onChange: this.filter.bind(this)\n      }))) : null), _react2.default.createElement(_Table2.default, {\n        tableStyle: this.props.tableStyle,\n        allData: this.state.data1,\n        data: items,\n        head: this.state.head,\n        onRowClick: this.props.onRowClick,\n        isLoading: this.props.isLoading,\n        sortedData: function sortedData(data) {\n          return _this2.setState({\n            data1: data\n          });\n        },\n        loadingmsg: this.props.loadingmsg ? this.props.loadingmsg : \"Loading. . .\",\n        errormsg: this.props.errormsg ? this.props.errormsg : \"Error. . .\",\n        sort: this.props.sort\n      }), !this.props.isLoading ? _react2.default.createElement(\"div\", {\n        className: \"row\"\n      }, _react2.default.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, this.props.pagination === true ? _react2.default.createElement(_Pagination2.default, {\n        totalPages: this.state.filter ? tbdata2.length : this.state.totalPages //this.state.totalPages\n        ,\n        currentPage: //this.state.filter ? \"1\" : this.state.currentPage\n        this.state.currentPage,\n        onPageLinkClick: function onPageLinkClick(page) {\n          return _this2.setState({\n            currentPage: page\n          });\n        }\n      }) : null), _react2.default.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, this.props.pages === true ? _react2.default.createElement(_reactSelect2.default, {\n        className: \"selectouter\",\n        style: {\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          paddingBottom: 6,\n          borderBottomLeftRadius: 4,\n          borderBottomRightRadius: 0,\n          borderTopLeftRadius: 4,\n          borderTopRightRadius: 0,\n          marginTop: 10\n        },\n        name: \"Filter By\",\n        placeholder: \"Filter By\",\n        value: this.state.itemsPerPage,\n        onChange: this.handlePage.bind(this),\n        clearable: false,\n        options: [{\n          value: 5,\n          label: \"5 rows\"\n        }, {\n          value: 10,\n          label: \"10 rows\"\n        }, {\n          value: 20,\n          label: \"20 rows\"\n        }, {\n          value: 25,\n          label: \"25 rows\"\n        }, {\n          value: 50,\n          label: \"50 rows\"\n        }, {\n          value: 100,\n          label: \"100 rows\"\n        }]\n      }) : null), _react2.default.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, this.props.page === true ? _react2.default.createElement(\"div\", {\n        style: {\n          float: \"right\",\n          marginTop: 15\n        }\n      }, \"Page \", this.state.currentPage, \" of \", tbdata2.length) : null)) : null)))));\n    }\n  }]);\n\n  return TableContainer;\n}(_react.Component);\n\nexports.default = TableContainer;","map":null,"metadata":{},"sourceType":"script"}